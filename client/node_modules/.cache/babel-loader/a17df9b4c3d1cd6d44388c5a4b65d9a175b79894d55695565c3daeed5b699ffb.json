{"ast":null,"code":"import _objectSpread from \"D:/acm/ACM-main/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nvar _jsxFileName = \"D:\\\\acm\\\\ACM-main\\\\client\\\\src\\\\pages\\\\admin\\\\AdminUsers.js\",\n  _s = $RefreshSig$();\n// AdminUsers.js\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\n// API base URL for admin user management\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:5000/api/admin/users';\nfunction AdminUsers() {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [activeTab, setActiveTab] = useState('customer'); // Use backend role names for tabs\n  const [showModal, setShowModal] = useState(false);\n  const [editingUser, setEditingUser] = useState(null);\n  const [form, setForm] = useState({\n    name: '',\n    email: '',\n    phone: '',\n    password: '',\n    role: 'customer',\n    // Default to customer\n    address: ''\n  });\n  const [loading, setLoading] = useState(true);\n  const [submitError, setSubmitError] = useState('');\n  const [submitSuccess, setSubmitSuccess] = useState('');\n  const locations = ['Guntur', 'Prakasam', 'Krishna', 'Vijayawada', 'Nellore', 'Ongole', 'Tenali', 'Narasaraopet'];\n\n  // Role mapping between display names and database values\n  const roleDisplayMap = {\n    'customer': 'Customer',\n    'employee': 'Employee',\n    'customercare': 'Customer Care',\n    'admin': 'Admin'\n  };\n  const roles = Object.keys(roleDisplayMap); // Array of backend role names\n\n  // Fetch users from database on mount\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n  async function fetchUsers() {\n    try {\n      setLoading(true);\n      const token = sessionStorage.getItem('token'); // Changed from localStorage\n      if (!token) {\n        setSubmitError(\"Authentication required. Please log in.\");\n        setLoading(false);\n        return;\n      }\n      const {\n        data\n      } = await axios.get(API_URL, {\n        headers: {\n          Authorization: \"Bearer \".concat(token)\n        }\n      });\n      setUsers(data);\n      setSubmitError('');\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Fetch failed', err);\n      setSubmitError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to load users. Please check your connection or login again.');\n    } finally {\n      setLoading(false);\n    }\n  }\n  function openModal() {\n    let user = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    setSubmitError('');\n    setSubmitSuccess('');\n    if (user) {\n      var _user$profile, _user$profile2, _user$profile3;\n      setEditingUser(user);\n      setForm({\n        name: ((_user$profile = user.profile) === null || _user$profile === void 0 ? void 0 : _user$profile.name) || '',\n        email: ((_user$profile2 = user.profile) === null || _user$profile2 === void 0 ? void 0 : _user$profile2.email) || '',\n        phone: user.phone || '',\n        password: '',\n        // Don't populate password for security\n        role: user.role || 'customer',\n        address: ((_user$profile3 = user.profile) === null || _user$profile3 === void 0 ? void 0 : _user$profile3.address) || ''\n      });\n    } else {\n      setEditingUser(null);\n      setForm({\n        name: '',\n        email: '',\n        phone: '',\n        password: '',\n        role: activeTab,\n        address: ''\n      });\n    }\n    setShowModal(true);\n  }\n  async function saveUser() {\n    setSubmitError('');\n    setSubmitSuccess('');\n    try {\n      // Client-side validation\n      if (!form.name.trim()) {\n        setSubmitError('Name is required');\n        return;\n      }\n      if (!form.phone.trim()) {\n        setSubmitError('Phone number is required');\n        return;\n      }\n      if (!/^\\d{10}$/.test(form.phone.trim())) {\n        setSubmitError('Phone number must be a 10-digit number');\n        return;\n      }\n      if (!editingUser && !form.password.trim()) {\n        setSubmitError('Password is required for new users');\n        return;\n      }\n      if (form.password.trim() && form.password.trim().length < 6) {\n        setSubmitError('Password must be at least 6 characters long');\n        return;\n      }\n      if (form.email.trim() && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(form.email.trim())) {\n        setSubmitError('Invalid email format');\n        return;\n      }\n      const token = sessionStorage.getItem('token'); // Changed from localStorage\n      if (!token) {\n        setSubmitError('You must be logged in');\n        return;\n      }\n      const headers = {\n        'Content-Type': 'application/json',\n        'Authorization': \"Bearer \".concat(token)\n      };\n\n      // Format user data according to the database schema\n      const userData = {\n        phone: form.phone.trim(),\n        role: form.role,\n        profile: {\n          name: form.name.trim(),\n          email: form.email.trim() || '',\n          address: form.address.trim() || ''\n        }\n      };\n\n      // Only include password for new users or if password field is filled\n      if (form.password.trim()) {\n        userData.password = form.password.trim();\n      }\n      console.log('Sending user data:', userData); // Added console log\n\n      if (editingUser) {\n        // Update existing user\n        await axios.put(\"\".concat(API_URL, \"/\").concat(editingUser._id), userData, {\n          headers\n        });\n        setSubmitSuccess('User updated successfully');\n      } else {\n        // Create new user\n        await axios.post(API_URL, userData, {\n          headers\n        });\n        setSubmitSuccess('User created successfully');\n      }\n      setShowModal(false);\n      fetchUsers(); // Refresh the list\n      setTimeout(() => setSubmitSuccess(''), 3000); // Clear success message\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Error saving user:', error);\n      setSubmitError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message);\n    }\n  }\n  async function deleteUser(id) {\n    if (!window.confirm('Are you sure you want to delete this user?')) return;\n    setSubmitError('');\n    setSubmitSuccess('');\n    try {\n      const token = sessionStorage.getItem('token'); // Changed from localStorage\n      if (!token) {\n        setSubmitError(\"Authentication required. Please log in.\");\n        return;\n      }\n      await axios.delete(\"\".concat(API_URL, \"/\").concat(id), {\n        headers: {\n          Authorization: \"Bearer \".concat(token)\n        }\n      });\n      await fetchUsers();\n      setSubmitSuccess('User deleted successfully');\n      setTimeout(() => setSubmitSuccess(''), 3000); // Clear success message\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      console.error('Delete failed', err);\n      setSubmitError(\"Error deleting user: \".concat(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Unknown error'));\n    }\n  }\n  function handleChange(e) {\n    const {\n      name,\n      value\n    } = e.target;\n    setForm(f => _objectSpread(_objectSpread({}, f), {}, {\n      [name]: value\n    }));\n  }\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center\",\n      children: \"Loading users...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 12\n    }, this);\n  }\n  const filteredUsers = users.filter(u => u.role === activeTab);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-page-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"page-title\",\n      children: \"User Management\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this), submitError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"status-message error\",\n      children: submitError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }, this), submitSuccess && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"status-message success\",\n      children: submitSuccess\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tab-nav\",\n      children: roles.map(r => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setActiveTab(r),\n        className: \"tab-button \".concat(activeTab === r ? 'active' : ''),\n        children: [roleDisplayMap[r], \"s (\", users.filter(u => u.role === r).length, \")\"]\n      }, r, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => openModal(),\n      className: \"btn btn-accent\",\n      children: [\"\\u2795 Add \", roleDisplayMap[activeTab]]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"data-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Phone\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 13\n          }, this), (activeTab === 'employee' || activeTab === 'customer') && /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 68\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Actions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: [filteredUsers.map(u => {\n          var _u$profile, _u$profile2, _u$profile3;\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: ((_u$profile = u.profile) === null || _u$profile === void 0 ? void 0 : _u$profile.name) || 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: ((_u$profile2 = u.profile) === null || _u$profile2 === void 0 ? void 0 : _u$profile2.email) || 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: u.phone || 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 15\n            }, this), (activeTab === 'employee' || activeTab === 'customer') && /*#__PURE__*/_jsxDEV(\"td\", {\n              children: ((_u$profile3 = u.profile) === null || _u$profile3 === void 0 ? void 0 : _u$profile3.address) || 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 70\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => openModal(u),\n                className: \"btn btn-secondary btn-sm\",\n                children: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => deleteUser(u._id),\n                className: \"btn btn-danger btn-sm\",\n                children: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 15\n            }, this)]\n          }, u._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this);\n        }), filteredUsers.length === 0 && /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: /*#__PURE__*/_jsxDEV(\"td\", {\n            colSpan: activeTab === 'employee' || activeTab === 'customer' ? 5 : 4,\n            className: \"text-center\",\n            children: [\"No \", roleDisplayMap[activeTab].toLowerCase(), \"s found.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }, this), showModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"modal-title\",\n          children: editingUser ? 'Edit User' : \"Add New \".concat(roleDisplayMap[activeTab])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Name:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"name\",\n            type: \"text\",\n            value: form.name,\n            onChange: handleChange,\n            className: \"form-control\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Email:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"email\",\n            type: \"email\",\n            value: form.email,\n            onChange: handleChange,\n            className: \"form-control\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Phone:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"phone\",\n            type: \"text\",\n            value: form.phone,\n            onChange: handleChange,\n            className: \"form-control\",\n            required: true,\n            placeholder: \"10-digit number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Password \", editingUser && '(leave blank to keep current)', \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"password\",\n            type: \"password\",\n            value: form.password,\n            onChange: handleChange,\n            className: \"form-control\",\n            required: !editingUser\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Role:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"role\",\n            value: form.role,\n            onChange: handleChange,\n            className: \"form-control\",\n            children: roles.map(role => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: role,\n              children: roleDisplayMap[role]\n            }, role, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this), (form.role === 'employee' || form.role === 'customer') && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: form.role === 'employee' ? 'Work Address:' : 'Address:'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 17\n          }, this), form.role === 'employee' ? /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"address\",\n            value: form.address,\n            onChange: handleChange,\n            className: \"form-control\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select Location\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 21\n            }, this), locations.map(loc => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: loc,\n              children: loc\n            }, loc, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 23\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"address\",\n            value: form.address,\n            onChange: handleChange,\n            className: \"form-control\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowModal(false),\n            className: \"btn btn-outline\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: saveUser,\n            className: \"btn btn-primary\",\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 200,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminUsers, \"6JV4+L2Vj47hiQe7OUAvdaujUBs=\");\n_c = AdminUsers;\nexport default AdminUsers;\nvar _c;\n$RefreshReg$(_c, \"AdminUsers\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","API_URL","AdminUsers","_s","users","setUsers","activeTab","setActiveTab","showModal","setShowModal","editingUser","setEditingUser","form","setForm","name","email","phone","password","role","address","loading","setLoading","submitError","setSubmitError","submitSuccess","setSubmitSuccess","locations","roleDisplayMap","roles","Object","keys","fetchUsers","token","sessionStorage","getItem","data","get","headers","Authorization","concat","err","_err$response","_err$response$data","console","error","response","message","openModal","user","arguments","length","undefined","_user$profile","_user$profile2","_user$profile3","profile","saveUser","trim","test","userData","log","put","_id","post","setTimeout","_error$response","_error$response$data","deleteUser","id","window","confirm","delete","_err$response2","_err$response2$data","handleChange","e","value","target","f","_objectSpread","className","children","fileName","_jsxFileName","lineNumber","columnNumber","filteredUsers","filter","u","map","r","onClick","_u$profile","_u$profile2","_u$profile3","colSpan","toLowerCase","type","onChange","required","placeholder","loc","_c","$RefreshReg$"],"sources":["D:/acm/ACM-main/client/src/pages/admin/AdminUsers.js"],"sourcesContent":["// AdminUsers.js\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\n// API base URL for admin user management\nconst API_URL = 'http://localhost:5000/api/admin/users';\n\nfunction AdminUsers() {\n  const [users, setUsers] = useState([]);\n  const [activeTab, setActiveTab] = useState('customer'); // Use backend role names for tabs\n  const [showModal, setShowModal] = useState(false);\n  const [editingUser, setEditingUser] = useState(null);\n  const [form, setForm] = useState({\n    name: '',\n    email: '',\n    phone: '',\n    password: '',\n    role: 'customer', // Default to customer\n    address: '',\n  });\n  const [loading, setLoading] = useState(true);\n  const [submitError, setSubmitError] = useState('');\n  const [submitSuccess, setSubmitSuccess] = useState('');\n\n  const locations = [\n    'Guntur','Prakasam','Krishna','Vijayawada','Nellore',\n    'Ongole','Tenali','Narasaraopet'\n  ];\n  \n  // Role mapping between display names and database values\n  const roleDisplayMap = {\n    'customer': 'Customer',\n    'employee': 'Employee',\n    'customercare': 'Customer Care',\n    'admin': 'Admin'\n  };\n  const roles = Object.keys(roleDisplayMap); // Array of backend role names\n\n  // Fetch users from database on mount\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  async function fetchUsers() {\n    try {\n      setLoading(true);\n      const token = sessionStorage.getItem('token'); // Changed from localStorage\n      if (!token) {\n        setSubmitError(\"Authentication required. Please log in.\");\n        setLoading(false);\n        return;\n      }\n      const { data } = await axios.get(API_URL, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setUsers(data);\n      setSubmitError('');\n    } catch (err) {\n      console.error('Fetch failed', err);\n      setSubmitError(err.response?.data?.message || 'Failed to load users. Please check your connection or login again.');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  function openModal(user = null) {\n    setSubmitError('');\n    setSubmitSuccess('');\n    if (user) {\n      setEditingUser(user);\n      setForm({\n        name: user.profile?.name || '',\n        email: user.profile?.email || '',\n        phone: user.phone || '',\n        password: '', // Don't populate password for security\n        role: user.role || 'customer',\n        address: user.profile?.address || ''\n      });\n    } else {\n      setEditingUser(null);\n      setForm({\n        name:'', email:'', phone:'', password:'', role:activeTab, address:''\n      });\n    }\n    setShowModal(true);\n  }\n\n  async function saveUser() {\n    setSubmitError('');\n    setSubmitSuccess('');\n    try {\n      // Client-side validation\n      if (!form.name.trim()) {\n        setSubmitError('Name is required');\n        return;\n      }\n      if (!form.phone.trim()) {\n        setSubmitError('Phone number is required');\n        return;\n      }\n      if (!/^\\d{10}$/.test(form.phone.trim())) {\n        setSubmitError('Phone number must be a 10-digit number');\n        return;\n      }\n      if (!editingUser && !form.password.trim()) {\n        setSubmitError('Password is required for new users');\n        return;\n      }\n      if (form.password.trim() && form.password.trim().length < 6) {\n        setSubmitError('Password must be at least 6 characters long');\n        return;\n      }\n      if (form.email.trim() && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(form.email.trim())) {\n        setSubmitError('Invalid email format');\n        return;\n      }\n\n      const token = sessionStorage.getItem('token'); // Changed from localStorage\n      if (!token) {\n        setSubmitError('You must be logged in');\n        return;\n      }\n\n      const headers = {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      };\n\n      // Format user data according to the database schema\n      const userData = {\n        phone: form.phone.trim(),\n        role: form.role,\n        profile: {\n          name: form.name.trim(),\n          email: form.email.trim() || '',\n          address: form.address.trim() || ''\n        }\n      };\n\n      // Only include password for new users or if password field is filled\n      if (form.password.trim()) {\n        userData.password = form.password.trim();\n      }\n\n      console.log('Sending user data:', userData); // Added console log\n\n      if (editingUser) {\n        // Update existing user\n        await axios.put(`${API_URL}/${editingUser._id}`, userData, { headers });\n        setSubmitSuccess('User updated successfully');\n      } else {\n        // Create new user\n        await axios.post(API_URL, userData, { headers });\n        setSubmitSuccess('User created successfully');\n      }\n      \n      setShowModal(false);\n      fetchUsers(); // Refresh the list\n      setTimeout(() => setSubmitSuccess(''), 3000); // Clear success message\n    } catch (error) {\n      console.error('Error saving user:', error);\n      setSubmitError(error.response?.data?.message || error.message);\n    }\n  }\n\n  async function deleteUser(id) {\n    if (!window.confirm('Are you sure you want to delete this user?')) return;\n    setSubmitError('');\n    setSubmitSuccess('');\n    try {\n      const token = sessionStorage.getItem('token'); // Changed from localStorage\n      if (!token) {\n        setSubmitError(\"Authentication required. Please log in.\");\n        return;\n      }\n      await axios.delete(`${API_URL}/${id}`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      await fetchUsers();\n      setSubmitSuccess('User deleted successfully');\n      setTimeout(() => setSubmitSuccess(''), 3000); // Clear success message\n    } catch (err) {\n      console.error('Delete failed', err);\n      setSubmitError(`Error deleting user: ${err.response?.data?.message || 'Unknown error'}`);\n    }\n  }\n\n  function handleChange(e) {\n    const { name, value } = e.target;\n    setForm(f => ({ ...f, [name]: value }));\n  }\n\n  if (loading) {\n    return <p className=\"text-center\">Loading users...</p>;\n  }\n\n  const filteredUsers = users.filter(u => u.role === activeTab);\n\n  return (\n    <div className=\"admin-page-container\">\n      <h2 className=\"page-title\">User Management</h2>\n\n      {submitError && (\n        <div className=\"status-message error\">\n          {submitError}\n        </div>\n      )}\n      {submitSuccess && (\n        <div className=\"status-message success\">\n          {submitSuccess}\n        </div>\n      )}\n\n      {/* Tabs */}\n      <div className=\"tab-nav\">\n        {roles.map(r => (\n          <button\n            key={r}\n            onClick={()=>setActiveTab(r)}\n            className={`tab-button ${activeTab===r?'active':''}`}\n          >\n            {roleDisplayMap[r]}s ({users.filter(u=>u.role===r).length})\n          </button>\n        ))}\n      </div>\n\n      {/* Add */}\n      <button\n        onClick={()=>openModal()}\n        className=\"btn btn-accent\"\n      >\n        ➕ Add {roleDisplayMap[activeTab]}\n      </button>\n\n      {/* Table */}\n      <table className=\"data-table\">\n        <thead>\n          <tr>\n            <th>Name</th>\n            <th>Email</th>\n            <th>Phone</th>\n            {(activeTab==='employee' || activeTab==='customer') && <th>Address</th>}\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {filteredUsers.map(u=>(\n            <tr key={u._id}>\n              <td>{u.profile?.name || 'N/A'}</td>\n              <td>{u.profile?.email || 'N/A'}</td>\n              <td>{u.phone || 'N/A'}</td>\n              {(activeTab==='employee' || activeTab==='customer') && <td>{u.profile?.address || 'N/A'}</td>}\n              <td>\n                <button \n                  onClick={()=>openModal(u)} \n                  className=\"btn btn-secondary btn-sm\"\n                >\n                  Edit\n                </button>\n                <button \n                  onClick={()=>deleteUser(u._id)}\n                  className=\"btn btn-danger btn-sm\"\n                >\n                  Delete\n                </button>\n              </td>\n            </tr>\n          ))}\n          {filteredUsers.length===0&&(\n            <tr>\n              <td colSpan={activeTab==='employee' || activeTab==='customer' ? 5 : 4} className=\"text-center\">\n                No {roleDisplayMap[activeTab].toLowerCase()}s found.\n              </td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n\n      {/* Modal for Add/Edit */}\n      {showModal && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <h3 className=\"modal-title\">{editingUser ? 'Edit User' : `Add New ${roleDisplayMap[activeTab]}`}</h3>\n            \n            <div className=\"form-group\">\n              <label>Name:</label>\n              <input \n                name=\"name\"\n                type=\"text\" \n                value={form.name} \n                onChange={handleChange}\n                className=\"form-control\"\n                required\n              />\n            </div>\n            \n            <div className=\"form-group\">\n              <label>Email:</label>\n              <input \n                name=\"email\"\n                type=\"email\" \n                value={form.email} \n                onChange={handleChange}\n                className=\"form-control\"\n              />\n            </div>\n            \n            <div className=\"form-group\">\n              <label>Phone:</label>\n              <input \n                name=\"phone\"\n                type=\"text\" \n                value={form.phone} \n                onChange={handleChange}\n                className=\"form-control\"\n                required\n                placeholder=\"10-digit number\"\n              />\n            </div>\n            \n            <div className=\"form-group\">\n              <label>\n                Password {editingUser && '(leave blank to keep current)'}:\n              </label>\n              <input \n                name=\"password\"\n                type=\"password\" \n                value={form.password} \n                onChange={handleChange}\n                className=\"form-control\"\n                required={!editingUser}\n              />\n            </div>\n            \n            <div className=\"form-group\">\n              <label>Role:</label>\n              <select \n                name=\"role\"\n                value={form.role} \n                onChange={handleChange}\n                className=\"form-control\"\n              >\n                {roles.map(role=>(\n                  <option key={role} value={role}>{roleDisplayMap[role]}</option>\n                ))}\n              </select>\n            </div>\n            \n            {(form.role === 'employee' || form.role === 'customer') && (\n              <div className=\"form-group\">\n                <label>\n                  {form.role === 'employee' ? 'Work Address:' : 'Address:'}\n                </label>\n                {form.role === 'employee' ? (\n                  <select \n                    name=\"address\"\n                    value={form.address} \n                    onChange={handleChange}\n                    className=\"form-control\"\n                  >\n                    <option value=\"\">Select Location</option>\n                    {locations.map(loc=>(\n                      <option key={loc} value={loc}>{loc}</option>\n                    ))}\n                  </select>\n                ) : (\n                  <textarea\n                    name=\"address\"\n                    value={form.address}\n                    onChange={handleChange}\n                    className=\"form-control\"\n                  />\n                )}\n              </div>\n            )}\n            \n            <div className=\"modal-actions\">\n              <button \n                onClick={()=>setShowModal(false)} \n                className=\"btn btn-outline\"\n              >\n                Cancel\n              </button>\n              <button \n                onClick={saveUser}\n                className=\"btn btn-primary\"\n              >\n                Save\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default AdminUsers;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}