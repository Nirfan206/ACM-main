{"ast":null,"code":"import _objectSpread from \"D:/acm/ACM-main/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nvar _jsxFileName = \"D:\\\\acm\\\\ACM-main\\\\client\\\\src\\\\pages\\\\admin\\\\AdminSettings.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AdminSettings() {\n  _s();\n  const [settings, setSettings] = useState({\n    siteName: 'AL CHAAN MEERA',\n    bannerUrl: '',\n    allowBookings: true\n  });\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  // Fetch settings on component mount\n  useEffect(() => {\n    const fetchSettings = async () => {\n      try {\n        setLoading(true);\n        const token = sessionStorage.getItem('token'); // Changed from localStorage\n        const response = await axios.get('http://localhost:5000/api/admin/settings', {\n          headers: {\n            Authorization: \"Bearer \".concat(token)\n          }\n        });\n        setSettings(response.data);\n        setError('');\n      } catch (err) {\n        console.error('Error fetching settings:', err);\n        setError('Failed to load settings. Please try again.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchSettings();\n  }, []);\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setSettings(_objectSpread(_objectSpread({}, settings), {}, {\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n  const handleSave = async e => {\n    e.preventDefault();\n    try {\n      setSaving(true);\n      setError('');\n      setSuccess('');\n      const token = sessionStorage.getItem('token'); // Changed from localStorage\n      await axios.put('http://localhost:5000/api/admin/settings', settings, {\n        headers: {\n          Authorization: \"Bearer \".concat(token)\n        }\n      });\n      setSuccess('Settings saved successfully!');\n\n      // Clear success message after 3 seconds\n      setTimeout(() => {\n        setSuccess('');\n      }, 3000);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Error saving settings:', err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to save settings. Please try again.');\n    } finally {\n      setSaving(false);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center p-8\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading settings...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card admin-page-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"card-title text-center\",\n      children: \"\\u2699\\uFE0F Site Settings\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"status-message error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"status-message success\",\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSave,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Site Name:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"siteName\",\n            value: settings.siteName,\n            onChange: handleChange,\n            className: \"form-control\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Banner Image URL:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"bannerUrl\",\n            value: settings.bannerUrl,\n            onChange: handleChange,\n            className: \"form-control\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group checkbox-group\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            name: \"allowBookings\",\n            checked: settings.allowBookings,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this), \"Allow Customer Bookings\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: saving,\n        className: \"btn \".concat(saving ? 'btn-disabled' : 'btn-primary'),\n        children: saving ? 'Saving...' : 'Save Settings'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminSettings, \"FWQgJfVxoRdSdzpEYcmcfk4fJQ4=\");\n_c = AdminSettings;\nexport default AdminSettings;\nvar _c;\n$RefreshReg$(_c, \"AdminSettings\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","AdminSettings","_s","settings","setSettings","siteName","bannerUrl","allowBookings","loading","setLoading","saving","setSaving","error","setError","success","setSuccess","fetchSettings","token","sessionStorage","getItem","response","get","headers","Authorization","concat","data","err","console","handleChange","e","name","value","type","checked","target","_objectSpread","handleSave","preventDefault","put","setTimeout","_err$response","_err$response$data","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","onChange","disabled","_c","$RefreshReg$"],"sources":["D:/acm/ACM-main/client/src/pages/admin/AdminSettings.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nfunction AdminSettings() {\n  const [settings, setSettings] = useState({\n    siteName: 'AL CHAAN MEERA',\n    bannerUrl: '',\n    allowBookings: true,\n  });\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  \n  // Fetch settings on component mount\n  useEffect(() => {\n    const fetchSettings = async () => {\n      try {\n        setLoading(true);\n        const token = sessionStorage.getItem('token'); // Changed from localStorage\n        const response = await axios.get('http://localhost:5000/api/admin/settings', {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n        setSettings(response.data);\n        setError('');\n      } catch (err) {\n        console.error('Error fetching settings:', err);\n        setError('Failed to load settings. Please try again.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchSettings();\n  }, []);\n\n  const handleChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setSettings({\n      ...settings,\n      [name]: type === 'checkbox' ? checked : value,\n    });\n  };\n\n  const handleSave = async (e) => {\n    e.preventDefault();\n    try {\n      setSaving(true);\n      setError('');\n      setSuccess('');\n      \n      const token = sessionStorage.getItem('token'); // Changed from localStorage\n      await axios.put(\n        'http://localhost:5000/api/admin/settings',\n        settings,\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      \n      setSuccess('Settings saved successfully!');\n      \n      // Clear success message after 3 seconds\n      setTimeout(() => {\n        setSuccess('');\n      }, 3000);\n    } catch (err) {\n      console.error('Error saving settings:', err);\n      setError(err.response?.data?.message || 'Failed to save settings. Please try again.');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center p-8\">\n        <p>Loading settings...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"card admin-page-container\">\n      <h3 className=\"card-title text-center\">⚙️ Site Settings</h3>\n      \n      {error && (\n        <div className=\"status-message error\">\n          {error}\n        </div>\n      )}\n      \n      {success && (\n        <div className=\"status-message success\">\n          {success}\n        </div>\n      )}\n\n      <form onSubmit={handleSave}>\n        <div className=\"form-group\">\n          <label>\n            Site Name:\n            <input\n              type=\"text\"\n              name=\"siteName\"\n              value={settings.siteName}\n              onChange={handleChange}\n              className=\"form-control\"\n            />\n          </label>\n        </div>\n\n        <div className=\"form-group\">\n          <label>\n            Banner Image URL:\n            <input\n              type=\"text\"\n              name=\"bannerUrl\"\n              value={settings.bannerUrl}\n              onChange={handleChange}\n              className=\"form-control\"\n            />\n          </label>\n        </div>\n\n        <div className=\"form-group checkbox-group\">\n          <label>\n            <input\n              type=\"checkbox\"\n              name=\"allowBookings\"\n              checked={settings.allowBookings}\n              onChange={handleChange}\n            />\n            Allow Customer Bookings\n          </label>\n        </div>\n\n        <button\n          type=\"submit\"\n          disabled={saving}\n          className={`btn ${saving ? 'btn-disabled' : 'btn-primary'}`}\n        >\n          {saving ? 'Saving...' : 'Save Settings'}\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default AdminSettings;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}