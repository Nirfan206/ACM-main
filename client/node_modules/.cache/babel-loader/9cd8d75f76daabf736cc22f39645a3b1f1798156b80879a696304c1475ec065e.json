{"ast":null,"code":"var _jsxFileName = \"D:\\\\acm\\\\ACM-main\\\\client\\\\src\\\\pages\\\\customercare\\\\CareEmployeeAvailability.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CareEmployeeAvailability() {\n  _s();\n  const [employees, setEmployees] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n  const fetchEmployeeStatuses = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const token = sessionStorage.getItem('token');\n      if (!token) {\n        navigate('/login');\n        return;\n      }\n\n      // Reusing the admin endpoint for employee statuses\n      const response = await axios.get('http://localhost:5000/api/admin/employees/status', {\n        headers: {\n          Authorization: \"Bearer \".concat(token)\n        }\n      });\n      setEmployees(response.data);\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2, _err$response3;\n      console.error('Error fetching employee statuses:', err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to load employee availability.');\n      if (((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status) === 401 || ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : _err$response3.status) === 403) {\n        navigate('/login');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchEmployeeStatuses();\n  }, [navigate]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center p-8\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading employee availability...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center p-8 status-message error\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Error: \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card admin-page-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"card-title text-center\",\n      children: \"\\uD83E\\uDDD1\\u200D\\uD83D\\uDD27 Employee Availability Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'right',\n        marginBottom: '1rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: fetchEmployeeStatuses,\n        className: \"btn btn-secondary btn-sm\",\n        children: \"Refresh Status\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), employees.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center text-light\",\n      children: \"No employee data available.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"data-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Employee Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Phone\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: employees.map(employee => {\n          var _employee$profile;\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: ((_employee$profile = employee.profile) === null || _employee$profile === void 0 ? void 0 : _employee$profile.name) || 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: employee.phone || 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"status-badge \".concat(employee.workingStatus === 'free' ? 'status-warning' : 'status-success'),\n                children: employee.workingStatus.toUpperCase()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 17\n            }, this)]\n          }, employee._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n_s(CareEmployeeAvailability, \"EvZ42mRXm+SWAdR3Yxzx9qbF2SI=\", false, function () {\n  return [useNavigate];\n});\n_c = CareEmployeeAvailability;\nexport default CareEmployeeAvailability;\nvar _c;\n$RefreshReg$(_c, \"CareEmployeeAvailability\");","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","jsxDEV","_jsxDEV","CareEmployeeAvailability","_s","employees","setEmployees","loading","setLoading","error","setError","navigate","fetchEmployeeStatuses","token","sessionStorage","getItem","response","get","headers","Authorization","concat","data","err","_err$response","_err$response$data","_err$response2","_err$response3","console","message","status","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","textAlign","marginBottom","onClick","length","map","employee","_employee$profile","profile","name","phone","workingStatus","toUpperCase","_id","_c","$RefreshReg$"],"sources":["D:/acm/ACM-main/client/src/pages/customercare/CareEmployeeAvailability.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction CareEmployeeAvailability() {\r\n  const [employees, setEmployees] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const fetchEmployeeStatuses = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError('');\r\n      const token = sessionStorage.getItem('token');\r\n      if (!token) {\r\n        navigate('/login');\r\n        return;\r\n      }\r\n\r\n      // Reusing the admin endpoint for employee statuses\r\n      const response = await axios.get('http://localhost:5000/api/admin/employees/status', {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      setEmployees(response.data);\r\n    } catch (err) {\r\n      console.error('Error fetching employee statuses:', err);\r\n      setError(err.response?.data?.message || 'Failed to load employee availability.');\r\n      if (err.response?.status === 401 || err.response?.status === 403) {\r\n        navigate('/login');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchEmployeeStatuses();\r\n  }, [navigate]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"text-center p-8\">\r\n        <p>Loading employee availability...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"text-center p-8 status-message error\">\r\n        <p>Error: {error}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"card admin-page-container\">\r\n      <h3 className=\"card-title text-center\">🧑‍🔧 Employee Availability Dashboard</h3>\r\n      \r\n      <div style={{ textAlign: 'right', marginBottom: '1rem' }}>\r\n        <button onClick={fetchEmployeeStatuses} className=\"btn btn-secondary btn-sm\">\r\n          Refresh Status\r\n        </button>\r\n      </div>\r\n\r\n      {employees.length === 0 ? (\r\n        <p className=\"text-center text-light\">No employee data available.</p>\r\n      ) : (\r\n        <table className=\"data-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Employee Name</th>\r\n              <th>Phone</th>\r\n              <th>Status</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {employees.map((employee) => (\r\n              <tr key={employee._id}>\r\n                <td>{employee.profile?.name || 'N/A'}</td>\r\n                <td>{employee.phone || 'N/A'}</td>\r\n                <td>\r\n                  <span\r\n                    className={`status-badge ${employee.workingStatus === 'free' ? 'status-warning' : 'status-success'}`}\r\n                  >\r\n                    {employee.workingStatus.toUpperCase()}\r\n                  </span>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CareEmployeeAvailability;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}