{"ast":null,"code":"var _jsxFileName = \"D:\\\\acm\\\\ACM-main\\\\client\\\\src\\\\pages\\\\admin\\\\AdminEmployeeStatus.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AdminEmployeeStatus() {\n  _s();\n  const [employees, setEmployees] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n  const fetchEmployeeStatuses = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const token = sessionStorage.getItem('token');\n      if (!token) {\n        navigate('/login');\n        return;\n      }\n      const response = await axios.get('http://localhost:5000/api/admin/employees/status', {\n        headers: {\n          Authorization: \"Bearer \".concat(token)\n        }\n      });\n      setEmployees(response.data);\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2, _err$response3;\n      console.error('Error fetching employee statuses:', err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to load employee statuses.');\n      if (((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status) === 401 || ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : _err$response3.status) === 403) {\n        navigate('/login');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchEmployeeStatuses(); // Initial fetch\n\n    const intervalId = setInterval(fetchEmployeeStatuses, 5000); // Poll every 5 seconds\n\n    return () => clearInterval(intervalId); // Clean up interval on component unmount\n  }, [navigate]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center p-8\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading employee statuses...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center p-8 status-message error\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Error: \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card admin-page-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"card-title text-center\",\n      children: \"\\uD83E\\uDDD1\\u200D\\uD83D\\uDD27 Employee Work Status Monitor\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'right',\n        marginBottom: '1rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: fetchEmployeeStatuses,\n        className: \"btn btn-secondary btn-sm\",\n        children: \"Refresh Status\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), employees.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center text-light\",\n      children: \"No employee data available.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"data-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Employee Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Phone\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: employees.map(employee => {\n          var _employee$profile, _employee$workingStat;\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: ((_employee$profile = employee.profile) === null || _employee$profile === void 0 ? void 0 : _employee$profile.name) || 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: employee.phone || 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"status-badge \".concat(employee.workingStatus === 'free' ? 'status-warning' : 'status-success'),\n                children: ((_employee$workingStat = employee.workingStatus) === null || _employee$workingStat === void 0 ? void 0 : _employee$workingStat.toUpperCase()) || 'N/A'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 17\n            }, this)]\n          }, employee._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminEmployeeStatus, \"EvZ42mRXm+SWAdR3Yxzx9qbF2SI=\", false, function () {\n  return [useNavigate];\n});\n_c = AdminEmployeeStatus;\nexport default AdminEmployeeStatus;\nvar _c;\n$RefreshReg$(_c, \"AdminEmployeeStatus\");","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","jsxDEV","_jsxDEV","AdminEmployeeStatus","_s","employees","setEmployees","loading","setLoading","error","setError","navigate","fetchEmployeeStatuses","token","sessionStorage","getItem","response","get","headers","Authorization","concat","data","err","_err$response","_err$response$data","_err$response2","_err$response3","console","message","status","intervalId","setInterval","clearInterval","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","textAlign","marginBottom","onClick","length","map","employee","_employee$profile","_employee$workingStat","profile","name","phone","workingStatus","toUpperCase","_id","_c","$RefreshReg$"],"sources":["D:/acm/ACM-main/client/src/pages/admin/AdminEmployeeStatus.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction AdminEmployeeStatus() {\r\n  const [employees, setEmployees] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const fetchEmployeeStatuses = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError('');\r\n      const token = sessionStorage.getItem('token');\r\n      if (!token) {\r\n        navigate('/login');\r\n        return;\r\n      }\r\n\r\n      const response = await axios.get('http://localhost:5000/api/admin/employees/status', {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      setEmployees(response.data);\r\n    } catch (err) {\r\n      console.error('Error fetching employee statuses:', err);\r\n      setError(err.response?.data?.message || 'Failed to load employee statuses.');\r\n      if (err.response?.status === 401 || err.response?.status === 403) {\r\n        navigate('/login');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchEmployeeStatuses(); // Initial fetch\r\n\r\n    const intervalId = setInterval(fetchEmployeeStatuses, 5000); // Poll every 5 seconds\r\n\r\n    return () => clearInterval(intervalId); // Clean up interval on component unmount\r\n  }, [navigate]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"text-center p-8\">\r\n        <p>Loading employee statuses...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"text-center p-8 status-message error\">\r\n        <p>Error: {error}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"card admin-page-container\">\r\n      <h3 className=\"card-title text-center\">üßë‚Äçüîß Employee Work Status Monitor</h3>\r\n      \r\n      <div style={{ textAlign: 'right', marginBottom: '1rem' }}>\r\n        <button onClick={fetchEmployeeStatuses} className=\"btn btn-secondary btn-sm\">\r\n          Refresh Status\r\n        </button>\r\n      </div>\r\n\r\n      {employees.length === 0 ? (\r\n        <p className=\"text-center text-light\">No employee data available.</p>\r\n      ) : (\r\n        <table className=\"data-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Employee Name</th>\r\n              <th>Phone</th>\r\n              <th>Status</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {employees.map((employee) => (\r\n              <tr key={employee._id}>\r\n                <td>{employee.profile?.name || 'N/A'}</td>\r\n                <td>{employee.phone || 'N/A'}</td>\r\n                <td>\r\n                  <span\r\n                    className={`status-badge ${employee.workingStatus === 'free' ? 'status-warning' : 'status-success'}`}\r\n                  >\r\n                    {employee.workingStatus?.toUpperCase() || 'N/A'}\r\n                  </span>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminEmployeeStatus;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}