{"ast":null,"code":"import _objectSpread from \"D:/acm/ACM-main/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nvar _jsxFileName = \"D:\\\\acm\\\\ACM-main\\\\client\\\\src\\\\pages\\\\customer\\\\CustomerProfile.js\",\n  _s = $RefreshSig$();\n// client/src/pages/CustomerProfile.js\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { logout } from '../../utils/authUtils'; // Import logout utility\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CustomerProfile() {\n  _s();\n  const [profile, setProfile] = useState({\n    name: \"\",\n    phone: \"\",\n    email: \"\",\n    address: \"\",\n    preferences: {}\n  });\n  const [serviceHistory, setServiceHistory] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [editMode, setEditMode] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [showPasswordReset, setShowPasswordReset] = useState(false);\n  const [passwordData, setPasswordData] = useState({\n    currentPassword: \"\",\n    newPassword: \"\",\n    confirmPassword: \"\"\n  });\n  const [passwordError, setPasswordError] = useState(\"\");\n  const [passwordSuccess, setPasswordSuccess] = useState(\"\");\n  const navigate = useNavigate();\n\n  // Function to fetch the profile data and service history\n  const fetchProfile = async () => {\n    try {\n      var _userData$profile, _userData$profile2, _userData$profile3;\n      const token = sessionStorage.getItem(\"token\"); // Changed from localStorage\n      if (!token) {\n        logout(); // Use utility for logout\n        navigate(\"/login\");\n        return;\n      }\n      setLoading(true);\n\n      // Fetch profile data\n      const profileRes = await axios.get(\"http://localhost:5000/api/customer/profile\", {\n        headers: {\n          Authorization: \"Bearer \".concat(token)\n        }\n      });\n\n      // Map the data from the User model structure\n      const userData = profileRes.data;\n      setProfile({\n        name: ((_userData$profile = userData.profile) === null || _userData$profile === void 0 ? void 0 : _userData$profile.name) || \"\",\n        phone: userData.phone || \"\",\n        email: ((_userData$profile2 = userData.profile) === null || _userData$profile2 === void 0 ? void 0 : _userData$profile2.email) || \"\",\n        address: ((_userData$profile3 = userData.profile) === null || _userData$profile3 === void 0 ? void 0 : _userData$profile3.address) || \"\"\n      });\n\n      // Fetch service history, ensuring service details are populated\n      const bookingsRes = await axios.get(\"http://localhost:5000/api/customer/bookings\", {\n        headers: {\n          Authorization: \"Bearer \".concat(token)\n        }\n      });\n      setServiceHistory(bookingsRes.data);\n    } catch (err) {\n      var _err$response, _err$response2;\n      console.error(\"❌ Failed to fetch profile or service history:\", err);\n      if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401 || ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status) === 403) {\n        logout();\n        navigate('/login');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchProfile();\n  }, [navigate]);\n  const handleChange = e => {\n    setProfile(_objectSpread(_objectSpread({}, profile), {}, {\n      [e.target.name]: e.target.value\n    }));\n  };\n  const handleSave = async e => {\n    e.preventDefault();\n    setSaving(true);\n    try {\n      const token = sessionStorage.getItem(\"token\"); // Changed from localStorage\n\n      // Format the data according to the User model structure\n      const profileData = {\n        profile: {\n          name: profile.name,\n          email: profile.email,\n          address: profile.address\n        },\n        phone: profile.phone\n      };\n      await axios.put(\"http://localhost:5000/api/customer/profile\", profileData, {\n        headers: {\n          Authorization: \"Bearer \".concat(token)\n        }\n      });\n      setEditMode(false);\n      // Re-fetch the data after a successful save to ensure the UI is in sync\n      await fetchProfile();\n\n      // Show success message or notification\n      alert(\"Profile updated successfully!\");\n    } catch (err) {\n      var _err$response3, _err$response4;\n      console.error(\"❌ Failed to save profile:\", err);\n      alert(\"Failed to update profile. Please try again.\");\n      if (((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : _err$response3.status) === 401 || ((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : _err$response4.status) === 403) {\n        logout();\n        navigate('/login');\n      }\n    } finally {\n      setSaving(false);\n    }\n  };\n  const handlePasswordChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setPasswordData(_objectSpread(_objectSpread({}, passwordData), {}, {\n      [name]: value\n    }));\n    // Clear any previous error/success messages when user starts typing\n    setPasswordError(\"\");\n    setPasswordSuccess(\"\");\n  };\n  const handlePasswordReset = async e => {\n    e.preventDefault();\n\n    // Validate passwords match\n    if (passwordData.newPassword !== passwordData.confirmPassword) {\n      setPasswordError(\"New passwords do not match\");\n      return;\n    }\n\n    // Validate password length\n    if (passwordData.newPassword.length < 6) {\n      setPasswordError(\"New password must be at least 6 characters\");\n      return;\n    }\n    try {\n      const token = sessionStorage.getItem(\"token\"); // Changed from localStorage\n      await axios.put(\"http://localhost:5000/api/customer/password\", {\n        currentPassword: passwordData.currentPassword,\n        newPassword: passwordData.newPassword\n      }, {\n        headers: {\n          Authorization: \"Bearer \".concat(token)\n        }\n      });\n\n      // Reset form and show success message\n      setPasswordData({\n        currentPassword: \"\",\n        newPassword: \"\",\n        confirmPassword: \"\"\n      });\n      setPasswordSuccess(\"Password updated successfully\");\n\n      // Hide success message after 3 seconds\n      setTimeout(() => {\n        setPasswordSuccess(\"\");\n      }, 3000);\n    } catch (error) {\n      var _error$response, _error$response$data, _error$response2, _error$response3;\n      console.error(\"Error updating password:\", error);\n      setPasswordError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"Failed to update password\");\n      if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 401 || ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) === 403) {\n        logout();\n        navigate('/login');\n      }\n    }\n  };\n  const handleLogout = () => {\n    if (window.confirm(\"Are you sure you want to log out?\")) {\n      logout(); // Use utility for logout\n      navigate(\"/login\");\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"text-center\",\n    children: \"Loading profile...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 182,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card profile-container\",\n    style: {\n      maxWidth: 800,\n      margin: \"2rem auto\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        textAlign: \"center\",\n        marginBottom: \"1.5rem\",\n        color: 'var(--color-text)'\n      },\n      children: \"\\uD83D\\uDC64 My Profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSave,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Name:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"name\",\n          value: profile.name,\n          onChange: handleChange,\n          readOnly: !editMode,\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Phone:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"phone\",\n          value: profile.phone || \"\",\n          onChange: handleChange,\n          disabled: true // Phone number should not be editable\n          ,\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          name: \"email\",\n          value: profile.email,\n          onChange: handleChange,\n          readOnly: !editMode,\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Address:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"address\",\n          value: profile.address,\n          onChange: handleChange,\n          readOnly: !editMode,\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-danger\",\n            onClick: handleLogout,\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-warning\",\n            onClick: () => setShowPasswordReset(!showPasswordReset),\n            children: showPasswordReset ? \"Hide Password Reset\" : \"Reset Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this), editMode ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-actions-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-outline\",\n            onClick: () => setEditMode(false),\n            disabled: saving,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-primary\",\n            disabled: saving,\n            children: saving ? \"Saving...\" : \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn btn-primary\",\n          onClick: () => setEditMode(true),\n          children: \"Edit Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this), showPasswordReset && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"password-reset-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        style: {\n          textAlign: \"center\",\n          marginBottom: \"1rem\"\n        },\n        children: \"Reset Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 11\n      }, this), passwordError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status-message error\",\n        children: passwordError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 13\n      }, this), passwordSuccess && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status-message success\",\n        children: passwordSuccess\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handlePasswordReset,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Current Password:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"currentPassword\",\n            value: passwordData.currentPassword,\n            onChange: handlePasswordChange,\n            required: true,\n            className: \"form-control\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"New Password:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"newPassword\",\n            value: passwordData.newPassword,\n            onChange: handlePasswordChange,\n            required: true,\n            className: \"form-control\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Confirm New Password:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"confirmPassword\",\n            value: passwordData.confirmPassword,\n            onChange: handlePasswordChange,\n            required: true,\n            className: \"form-control\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: \"center\",\n            marginTop: \"1rem\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-primary\",\n            children: \"Update Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"service-history-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        style: {\n          textAlign: \"center\",\n          marginBottom: \"1rem\"\n        },\n        children: \"Service History\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this), serviceHistory.length > 0 ? /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"data-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Service\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: serviceHistory.map(service => {\n            var _service$service;\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: ((_service$service = service.service) === null || _service$service === void 0 ? void 0 : _service$service.type) || 'N/A'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: new Date(service.date).toLocaleDateString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"status-badge status-\".concat(service.status.toLowerCase().replace(' ', '-')),\n                  children: service.status\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 19\n              }, this)]\n            }, service._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          textAlign: \"center\",\n          padding: \"1rem\",\n          background: \"var(--background-light)\",\n          borderRadius: \"4px\"\n        },\n        children: \"No service history found. Book a service to see your history here.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 185,\n    columnNumber: 5\n  }, this);\n}\n_s(CustomerProfile, \"RmVQ6eB5EcRXpnTMZx1clYEIpDo=\", false, function () {\n  return [useNavigate];\n});\n_c = CustomerProfile;\nexport default CustomerProfile;\nvar _c;\n$RefreshReg$(_c, \"CustomerProfile\");","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","logout","jsxDEV","_jsxDEV","CustomerProfile","_s","profile","setProfile","name","phone","email","address","preferences","serviceHistory","setServiceHistory","loading","setLoading","editMode","setEditMode","saving","setSaving","showPasswordReset","setShowPasswordReset","passwordData","setPasswordData","currentPassword","newPassword","confirmPassword","passwordError","setPasswordError","passwordSuccess","setPasswordSuccess","navigate","fetchProfile","_userData$profile","_userData$profile2","_userData$profile3","token","sessionStorage","getItem","profileRes","get","headers","Authorization","concat","userData","data","bookingsRes","err","_err$response","_err$response2","console","error","response","status","handleChange","e","_objectSpread","target","value","handleSave","preventDefault","profileData","put","alert","_err$response3","_err$response4","handlePasswordChange","handlePasswordReset","length","setTimeout","_error$response","_error$response$data","_error$response2","_error$response3","message","handleLogout","window","confirm","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","maxWidth","margin","textAlign","marginBottom","color","onSubmit","type","onChange","readOnly","disabled","onClick","required","marginTop","map","service","_service$service","Date","date","toLocaleDateString","toLowerCase","replace","_id","padding","background","borderRadius","_c","$RefreshReg$"],"sources":["D:/acm/ACM-main/client/src/pages/customer/CustomerProfile.js"],"sourcesContent":["// client/src/pages/CustomerProfile.js\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { logout } from '../../utils/authUtils'; // Import logout utility\n\nfunction CustomerProfile() {\n  const [profile, setProfile] = useState({\n    name: \"\",\n    phone: \"\",\n    email: \"\",\n    address: \"\",\n    preferences: {}\n  });\n  const [serviceHistory, setServiceHistory] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [editMode, setEditMode] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [showPasswordReset, setShowPasswordReset] = useState(false);\n  const [passwordData, setPasswordData] = useState({\n    currentPassword: \"\",\n    newPassword: \"\",\n    confirmPassword: \"\"\n  });\n  const [passwordError, setPasswordError] = useState(\"\");\n  const [passwordSuccess, setPasswordSuccess] = useState(\"\");\n\n  const navigate = useNavigate();\n\n  // Function to fetch the profile data and service history\n  const fetchProfile = async () => {\n    try {\n      const token = sessionStorage.getItem(\"token\"); // Changed from localStorage\n      if (!token) {\n        logout(); // Use utility for logout\n        navigate(\"/login\");\n        return;\n      }\n      setLoading(true);\n      \n      // Fetch profile data\n      const profileRes = await axios.get(\"http://localhost:5000/api/customer/profile\", {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      \n      // Map the data from the User model structure\n      const userData = profileRes.data;\n      setProfile({\n        name: userData.profile?.name || \"\",\n        phone: userData.phone || \"\",\n        email: userData.profile?.email || \"\",\n        address: userData.profile?.address || \"\"\n      });\n      \n      // Fetch service history, ensuring service details are populated\n      const bookingsRes = await axios.get(\"http://localhost:5000/api/customer/bookings\", {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setServiceHistory(bookingsRes.data);\n    } catch (err) {\n      console.error(\"❌ Failed to fetch profile or service history:\", err);\n      if (err.response?.status === 401 || err.response?.status === 403) {\n        logout();\n        navigate('/login');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchProfile();\n  }, [navigate]);\n\n  const handleChange = (e) => {\n    setProfile({ ...profile, [e.target.name]: e.target.value });\n  };\n\n  const handleSave = async (e) => {\n    e.preventDefault();\n    setSaving(true);\n    try {\n      const token = sessionStorage.getItem(\"token\"); // Changed from localStorage\n      \n      // Format the data according to the User model structure\n      const profileData = {\n        profile: {\n          name: profile.name,\n          email: profile.email,\n          address: profile.address\n        },\n        phone: profile.phone\n      };\n      \n      await axios.put(\n        \"http://localhost:5000/api/customer/profile\",\n        profileData,\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      setEditMode(false);\n      // Re-fetch the data after a successful save to ensure the UI is in sync\n      await fetchProfile();\n      \n      // Show success message or notification\n      alert(\"Profile updated successfully!\");\n    } catch (err) {\n      console.error(\"❌ Failed to save profile:\", err);\n      alert(\"Failed to update profile. Please try again.\");\n      if (err.response?.status === 401 || err.response?.status === 403) {\n        logout();\n        navigate('/login');\n      }\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handlePasswordChange = (e) => {\n    const { name, value } = e.target;\n    setPasswordData({ ...passwordData, [name]: value });\n    // Clear any previous error/success messages when user starts typing\n    setPasswordError(\"\");\n    setPasswordSuccess(\"\");\n  };\n\n  const handlePasswordReset = async (e) => {\n    e.preventDefault();\n    \n    // Validate passwords match\n    if (passwordData.newPassword !== passwordData.confirmPassword) {\n      setPasswordError(\"New passwords do not match\");\n      return;\n    }\n    \n    // Validate password length\n    if (passwordData.newPassword.length < 6) {\n      setPasswordError(\"New password must be at least 6 characters\");\n      return;\n    }\n    \n    try {\n      const token = sessionStorage.getItem(\"token\"); // Changed from localStorage\n      await axios.put(\n        \"http://localhost:5000/api/customer/password\",\n        {\n          currentPassword: passwordData.currentPassword,\n          newPassword: passwordData.newPassword\n        },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      \n      // Reset form and show success message\n      setPasswordData({\n        currentPassword: \"\",\n        newPassword: \"\",\n        confirmPassword: \"\"\n      });\n      setPasswordSuccess(\"Password updated successfully\");\n      \n      // Hide success message after 3 seconds\n      setTimeout(() => {\n        setPasswordSuccess(\"\");\n      }, 3000);\n      \n    } catch (error) {\n      console.error(\"Error updating password:\", error);\n      setPasswordError(error.response?.data?.message || \"Failed to update password\");\n      if (error.response?.status === 401 || error.response?.status === 403) {\n        logout();\n        navigate('/login');\n      }\n    }\n  };\n\n  const handleLogout = () => {\n    if (window.confirm(\"Are you sure you want to log out?\")) {\n      logout(); // Use utility for logout\n      navigate(\"/login\");\n    }\n  };\n\n  if (loading) return <p className=\"text-center\">Loading profile...</p>;\n\n  return (\n    <div className=\"card profile-container\" style={{ maxWidth: 800, margin: \"2rem auto\" }}>\n      <h3 style={{ textAlign: \"center\", marginBottom: \"1.5rem\", color: 'var(--color-text)' }}>👤 My Profile</h3>\n\n      <form onSubmit={handleSave}>\n        <div className=\"form-group\">\n          <label>Name:</label>\n          <input\n            type=\"text\"\n            name=\"name\"\n            value={profile.name}\n            onChange={handleChange}\n            readOnly={!editMode}\n            className=\"form-control\"\n          />\n        </div>\n\n        <div className=\"form-group\">\n          <label>Phone:</label>\n          <input\n                type=\"text\"\n                name=\"phone\"\n                value={profile.phone || \"\"}\n                onChange={handleChange}\n                disabled={true} // Phone number should not be editable\n                className=\"form-control\"\n              />\n        </div>\n\n        <div className=\"form-group\">\n          <label>Email:</label>\n          <input\n            type=\"email\"\n            name=\"email\"\n            value={profile.email}\n            onChange={handleChange}\n            readOnly={!editMode}\n            className=\"form-control\"\n          />\n        </div>\n\n        <div className=\"form-group\">\n          <label>Address:</label>\n          <textarea\n            name=\"address\"\n            value={profile.address}\n            onChange={handleChange}\n            readOnly={!editMode}\n            className=\"form-control\"\n          />\n        </div>\n\n        <div className=\"form-actions\">\n          <div>\n            <button\n              type=\"button\"\n              className=\"btn btn-danger\"\n              onClick={handleLogout}\n            >\n              Logout\n            </button>\n            <button\n              type=\"button\"\n              className=\"btn btn-warning\"\n              onClick={() => setShowPasswordReset(!showPasswordReset)}\n            >\n              {showPasswordReset ? \"Hide Password Reset\" : \"Reset Password\"}\n            </button>\n          </div>\n\n          {editMode ? (\n            <div className=\"form-actions-group\">\n              <button\n                type=\"button\"\n                className=\"btn btn-outline\"\n                onClick={() => setEditMode(false)}\n                disabled={saving}\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                className=\"btn btn-primary\"\n                disabled={saving}\n              >\n                {saving ? \"Saving...\" : \"Save\"}\n              </button>\n            </div>\n          ) : (\n            <button\n              type=\"button\"\n              className=\"btn btn-primary\"\n              onClick={() => setEditMode(true)}\n            >\n              Edit Profile\n            </button>\n          )}\n        </div>\n      </form>\n\n      {/* Password Reset Form */}\n      {showPasswordReset && (\n        <div className=\"password-reset-section\">\n          <h4 style={{ textAlign: \"center\", marginBottom: \"1rem\" }}>Reset Password</h4>\n          \n          {passwordError && (\n            <div className=\"status-message error\">\n              {passwordError}\n            </div>\n          )}\n          \n          {passwordSuccess && (\n            <div className=\"status-message success\">\n              {passwordSuccess}\n            </div>\n          )}\n          \n          <form onSubmit={handlePasswordReset}>\n            <div className=\"form-group\">\n              <label>Current Password:</label>\n              <input\n                type=\"password\"\n                name=\"currentPassword\"\n                value={passwordData.currentPassword}\n                onChange={handlePasswordChange}\n                required\n                className=\"form-control\"\n              />\n            </div>\n            \n            <div className=\"form-group\">\n              <label>New Password:</label>\n              <input\n                type=\"password\"\n                name=\"newPassword\"\n                value={passwordData.newPassword}\n                onChange={handlePasswordChange}\n                required\n                className=\"form-control\"\n              />\n            </div>\n            \n            <div className=\"form-group\">\n              <label>Confirm New Password:</label>\n              <input\n                type=\"password\"\n                name=\"confirmPassword\"\n                value={passwordData.confirmPassword}\n                onChange={handlePasswordChange}\n                required\n                className=\"form-control\"\n              />\n            </div>\n            \n            <div style={{ textAlign: \"center\", marginTop: \"1rem\" }}>\n              <button type=\"submit\" className=\"btn btn-primary\">\n                Update Password\n              </button>\n            </div>\n          </form>\n        </div>\n      )}\n      \n      {/* Service History Section */}\n      <div className=\"service-history-section\">\n        <h4 style={{ textAlign: \"center\", marginBottom: \"1rem\" }}>Service History</h4>\n        \n        {serviceHistory.length > 0 ? (\n          <table className=\"data-table\">\n            <thead>\n              <tr>\n                <th>Service</th>\n                <th>Date</th>\n                <th>Status</th>\n              </tr>\n            </thead>\n            <tbody>\n              {serviceHistory.map((service) => (\n                <tr key={service._id}>\n                  <td>{service.service?.type || 'N/A'}</td>\n                  <td>{new Date(service.date).toLocaleDateString()}</td>\n                  <td>\n                    <span className={`status-badge status-${service.status.toLowerCase().replace(' ', '-')}`}>\n                      {service.status}\n                    </span>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        ) : (\n          <p style={{ textAlign: \"center\", padding: \"1rem\", background: \"var(--background-light)\", borderRadius: \"4px\" }}>\n            No service history found. Book a service to see your history here.\n          </p>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default CustomerProfile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}