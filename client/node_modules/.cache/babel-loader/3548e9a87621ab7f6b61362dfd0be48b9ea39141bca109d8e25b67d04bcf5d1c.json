{"ast":null,"code":"var _jsxFileName = \"D:\\\\acm\\\\ACM-main\\\\client\\\\src\\\\pages\\\\admin\\\\AdminBookings.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport ReactToPrint from 'react-to-print'; // NEW: Import ReactToPrint\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AdminBookings() {\n  _s();\n  var _selectedBooking$user, _selectedBooking$user2, _selectedBooking$user3, _selectedBooking$user4, _selectedBooking$user5, _selectedBooking$serv, _selectedBooking$empl, _selectedBooking$empl2, _selectedBooking$empl3;\n  const [bookings, setBookings] = useState([]);\n  const [employees, setEmployees] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [showModal, setShowModal] = useState(false);\n  const [selectedBooking, setSelectedBooking] = useState(null);\n  const [assignEmployeeId, setAssignEmployeeId] = useState('');\n  const [bookingStatusUpdate, setBookingStatusUpdate] = useState('');\n  const [bookingNotes, setBookingNotes] = useState('');\n  // const [finalAmountInput, setFinalAmountInput] = useState(''); // Removed: State for final amount input\n\n  const navigate = useNavigate();\n  const componentRef = useRef(); // NEW: Ref for the component to print\n\n  const allowedStatuses = ['Pending', 'In Progress', 'Completed', 'Cancelled', 'Pending - Weather', 'Pending - Customer Unavailable', 'Pending - Technical', 'Completed - Awaiting Admin Confirmation' // NEW: Admin can also set this status\n  ];\n  useEffect(() => {\n    fetchBookingsAndEmployees(); // Initial fetch\n\n    const intervalId = setInterval(fetchBookingsAndEmployees, 5000); // Poll every 5 seconds\n\n    return () => clearInterval(intervalId); // Clean up interval on component unmount\n  }, [navigate]);\n  const fetchBookingsAndEmployees = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const token = sessionStorage.getItem('token');\n      if (!token) {\n        navigate('/login');\n        return;\n      }\n\n      // Fetch all bookings\n      const bookingsResponse = await axios.get('http://localhost:5000/api/admin/bookings', {\n        headers: {\n          Authorization: \"Bearer \".concat(token)\n        }\n      });\n      setBookings(bookingsResponse.data);\n\n      // Fetch all employees\n      const employeesResponse = await axios.get('http://localhost:5000/api/admin/users', {\n        headers: {\n          Authorization: \"Bearer \".concat(token)\n        }\n      });\n      setEmployees(employeesResponse.data.filter(user => user.role === 'employee'));\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2, _err$response3;\n      console.error('Error fetching data:', err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to load bookings or employees.');\n      if (((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status) === 401 || ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : _err$response3.status) === 403) {\n        navigate('/login');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n  const openManageModal = booking => {\n    var _booking$employee;\n    setSelectedBooking(booking);\n    setAssignEmployeeId(((_booking$employee = booking.employee) === null || _booking$employee === void 0 ? void 0 : _booking$employee._id) || '');\n    setBookingStatusUpdate(booking.status);\n    setBookingNotes(booking.notes || '');\n    // setFinalAmountInput(booking.finalAmount > 0 ? booking.finalAmount.toString() : ''); // Removed: Pre-fill final amount\n    setShowModal(true);\n  };\n  const handleAssignEmployee = async () => {\n    if (!selectedBooking || !assignEmployeeId) {\n      setError('Please select a booking and an employee to assign.');\n      setTimeout(() => setError(''), 3000);\n      return;\n    }\n    try {\n      const token = sessionStorage.getItem('token');\n      await axios.put(\"http://localhost:5000/api/admin/bookings/\".concat(selectedBooking._id, \"/assign-employee\"), {\n        employeeId: assignEmployeeId\n      }, {\n        headers: {\n          Authorization: \"Bearer \".concat(token)\n        }\n      });\n      setSuccess('Employee assigned successfully!');\n      setShowModal(false);\n      fetchBookingsAndEmployees(); // Re-fetch immediately after action\n      setTimeout(() => setSuccess(''), 3000);\n    } catch (err) {\n      var _err$response4, _err$response4$data;\n      console.error('Error assigning employee:', err);\n      setError(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.message) || 'Failed to assign employee.');\n      setTimeout(() => setError(''), 3000);\n    }\n  };\n  const handleUpdateBookingStatus = async () => {\n    if (!selectedBooking || !bookingStatusUpdate) {\n      setError('Please select a booking and a status to update.');\n      setTimeout(() => setError(''), 3000);\n      return;\n    }\n\n    // Removed: Validation for final amount if status is 'Completed'\n    // if (bookingStatusUpdate === 'Completed') {\n    //   if (finalAmountInput === '' || isNaN(Number(finalAmountInput)) || Number(finalAmountInput) <= 0) {\n    //     setError('Final amount must be a positive number when marking as Completed.');\n    //     setTimeout(() => setError(''), 5000);\n    //     return;\n    //   }\n    // }\n\n    try {\n      const token = sessionStorage.getItem('token');\n      await axios.put(\"http://localhost:5000/api/admin/bookings/\".concat(selectedBooking._id, \"/status\"), {\n        status: bookingStatusUpdate,\n        notes: bookingNotes.trim()\n        // finalAmount: bookingStatusUpdate === 'Completed' ? Number(finalAmountInput) : undefined, // Removed: Only send if status is 'Completed'\n      }, {\n        headers: {\n          Authorization: \"Bearer \".concat(token)\n        }\n      });\n      setSuccess('Booking status updated successfully!');\n      setShowModal(false);\n      fetchBookingsAndEmployees(); // Re-fetch immediately after action\n      setTimeout(() => setSuccess(''), 3000);\n    } catch (err) {\n      var _err$response5, _err$response5$data;\n      console.error('Error updating booking status:', err);\n      setError(((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : (_err$response5$data = _err$response5.data) === null || _err$response5$data === void 0 ? void 0 : _err$response5$data.message) || 'Failed to update booking status.');\n      setTimeout(() => setError(''), 3000);\n    }\n  };\n  const formatDate = dateString => {\n    return new Date(dateString).toLocaleString(undefined, {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\",\n      hour: \"2-digit\",\n      minute: \"2-digit\"\n    });\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center p-8\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading bookings...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center p-8 status-message error\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Error: \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-page-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"card-title text-center\",\n      children: \"\\uD83D\\uDCC5 Manage Bookings\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"status-message success\",\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"status-message error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'right',\n        marginBottom: '1rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(ReactToPrint, {\n        trigger: () => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary\",\n          children: \"\\uD83D\\uDDA8\\uFE0F Print Bookings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 26\n        }, this),\n        content: () => componentRef.current,\n        documentTitle: \"Bookings List - \".concat(new Date().toLocaleDateString()),\n        pageStyle: \"@page { size: A4; margin: 10mm; } @media print { body { -webkit-print-color-adjust: exact; } }\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: componentRef,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          textAlign: 'center',\n          marginBottom: '1rem',\n          display: 'none'\n        },\n        className: \"print-only\",\n        children: [\"Bookings List - \", new Date().toLocaleDateString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), bookings.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-light\",\n        children: \"No bookings found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"data-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Booking ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Customer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Service\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Date & Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 17\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Assigned Employee\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: bookings.map(booking => {\n            var _booking$user, _booking$user$profile, _booking$user2, _booking$user3, _booking$user4, _booking$user4$profil, _booking$service, _booking$employee2, _booking$employee2$pr;\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: booking._id.substring(0, 8)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [((_booking$user = booking.user) === null || _booking$user === void 0 ? void 0 : (_booking$user$profile = _booking$user.profile) === null || _booking$user$profile === void 0 ? void 0 : _booking$user$profile.name) || 'N/A', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"tel:\".concat((_booking$user2 = booking.user) === null || _booking$user2 === void 0 ? void 0 : _booking$user2.phone),\n                  className: \"text-secondary\",\n                  children: ((_booking$user3 = booking.user) === null || _booking$user3 === void 0 ? void 0 : _booking$user3.phone) || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  children: ((_booking$user4 = booking.user) === null || _booking$user4 === void 0 ? void 0 : (_booking$user4$profil = _booking$user4.profile) === null || _booking$user4$profil === void 0 ? void 0 : _booking$user4$profil.address) || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: ((_booking$service = booking.service) === null || _booking$service === void 0 ? void 0 : _booking$service.type) || 'N/A'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [formatDate(booking.date), \" at \", booking.time]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"status-badge status-\".concat(booking.status.toLowerCase().replace(' ', '-').replace('awaiting-admin-confirmation', 'pending')),\n                  children: booking.status.replace(' - ', ' ').replace('awaiting admin confirmation', 'Awaiting Admin')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 19\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                children: ((_booking$employee2 = booking.employee) === null || _booking$employee2 === void 0 ? void 0 : (_booking$employee2$pr = _booking$employee2.profile) === null || _booking$employee2$pr === void 0 ? void 0 : _booking$employee2$pr.name) || 'Not Assigned'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => openManageModal(booking),\n                  className: \"btn btn-secondary btn-sm\",\n                  children: \"Manage\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 19\n              }, this)]\n            }, booking._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this), showModal && selectedBooking && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"modal-title\",\n          children: [\"Manage Booking: \", selectedBooking._id.substring(0, 8)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Customer:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 18\n            }, this), \" \", ((_selectedBooking$user = selectedBooking.user) === null || _selectedBooking$user === void 0 ? void 0 : (_selectedBooking$user2 = _selectedBooking$user.profile) === null || _selectedBooking$user2 === void 0 ? void 0 : _selectedBooking$user2.name) || 'N/A']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Phone:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 18\n            }, this), \" \", ((_selectedBooking$user3 = selectedBooking.user) === null || _selectedBooking$user3 === void 0 ? void 0 : _selectedBooking$user3.phone) || 'N/A']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Address:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 18\n            }, this), \" \", ((_selectedBooking$user4 = selectedBooking.user) === null || _selectedBooking$user4 === void 0 ? void 0 : (_selectedBooking$user5 = _selectedBooking$user4.profile) === null || _selectedBooking$user5 === void 0 ? void 0 : _selectedBooking$user5.address) || 'N/A']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Service:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 18\n            }, this), \" \", ((_selectedBooking$serv = selectedBooking.service) === null || _selectedBooking$serv === void 0 ? void 0 : _selectedBooking$serv.type) || 'N/A']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Date & Time:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 18\n            }, this), \" \", formatDate(selectedBooking.date), \" at \", selectedBooking.time]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Current Status:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 18\n            }, this), \" \", selectedBooking.status.replace(' - ', ' ').replace('awaiting admin confirmation', 'Awaiting Admin')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Assigned Employee:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 18\n            }, this), \" \", ((_selectedBooking$empl = selectedBooking.employee) === null || _selectedBooking$empl === void 0 ? void 0 : (_selectedBooking$empl2 = _selectedBooking$empl.profile) === null || _selectedBooking$empl2 === void 0 ? void 0 : _selectedBooking$empl2.name) || 'Not Assigned']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Notes:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 18\n            }, this), \" \", selectedBooking.notes || 'N/A']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 15\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Assign Employee:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: assignEmployeeId,\n            onChange: e => setAssignEmployeeId(e.target.value),\n            className: \"form-control\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select Employee\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 17\n            }, this), employees.map(emp => {\n              var _emp$profile;\n              return /*#__PURE__*/_jsxDEV(\"option\", {\n                value: emp._id,\n                children: ((_emp$profile = emp.profile) === null || _emp$profile === void 0 ? void 0 : _emp$profile.name) || emp.phone\n              }, emp._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 19\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleAssignEmployee,\n            disabled: !assignEmployeeId || assignEmployeeId === ((_selectedBooking$empl3 = selectedBooking.employee) === null || _selectedBooking$empl3 === void 0 ? void 0 : _selectedBooking$empl3._id),\n            className: \"btn btn-accent btn-sm mt-2\",\n            children: \"Assign\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Update Status:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: bookingStatusUpdate,\n            onChange: e => setBookingStatusUpdate(e.target.value),\n            className: \"form-control\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 17\n            }, this), allowedStatuses.map(status => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: status,\n              children: status.replace(' - ', ' ').replace('awaiting admin confirmation', 'Awaiting Admin')\n            }, status, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 13\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Add Notes:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: bookingNotes,\n            onChange: e => setBookingNotes(e.target.value),\n            className: \"form-control\",\n            rows: \"3\",\n            placeholder: \"Add notes for status update (e.g., reason for cancellation, delay)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowModal(false),\n            className: \"btn btn-outline\",\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleUpdateBookingStatus,\n            disabled: !bookingStatusUpdate || bookingStatusUpdate === selectedBooking.status && bookingNotes === (selectedBooking.notes || \"\"),\n            className: \"btn btn-primary\",\n            children: \"Update Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 171,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminBookings, \"bJbfrQmuhbuuNYImLDtoUbjNye8=\", false, function () {\n  return [useNavigate];\n});\n_c = AdminBookings;\nexport default AdminBookings;\nvar _c;\n$RefreshReg$(_c, \"AdminBookings\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","useNavigate","ReactToPrint","jsxDEV","_jsxDEV","AdminBookings","_s","_selectedBooking$user","_selectedBooking$user2","_selectedBooking$user3","_selectedBooking$user4","_selectedBooking$user5","_selectedBooking$serv","_selectedBooking$empl","_selectedBooking$empl2","_selectedBooking$empl3","bookings","setBookings","employees","setEmployees","loading","setLoading","error","setError","success","setSuccess","showModal","setShowModal","selectedBooking","setSelectedBooking","assignEmployeeId","setAssignEmployeeId","bookingStatusUpdate","setBookingStatusUpdate","bookingNotes","setBookingNotes","navigate","componentRef","allowedStatuses","fetchBookingsAndEmployees","intervalId","setInterval","clearInterval","token","sessionStorage","getItem","bookingsResponse","get","headers","Authorization","concat","data","employeesResponse","filter","user","role","err","_err$response","_err$response$data","_err$response2","_err$response3","console","response","message","status","openManageModal","booking","_booking$employee","employee","_id","notes","handleAssignEmployee","setTimeout","put","employeeId","_err$response4","_err$response4$data","handleUpdateBookingStatus","trim","_err$response5","_err$response5$data","formatDate","dateString","Date","toLocaleString","undefined","year","month","day","hour","minute","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","textAlign","marginBottom","trigger","content","current","documentTitle","toLocaleDateString","pageStyle","ref","display","length","map","_booking$user","_booking$user$profile","_booking$user2","_booking$user3","_booking$user4","_booking$user4$profil","_booking$service","_booking$employee2","_booking$employee2$pr","substring","profile","name","href","phone","address","service","type","date","time","toLowerCase","replace","onClick","value","onChange","e","target","emp","_emp$profile","disabled","rows","placeholder","_c","$RefreshReg$"],"sources":["D:/acm/ACM-main/client/src/pages/admin/AdminBookings.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport ReactToPrint from 'react-to-print'; // NEW: Import ReactToPrint\n\nfunction AdminBookings() {\n  const [bookings, setBookings] = useState([]);\n  const [employees, setEmployees] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [showModal, setShowModal] = useState(false);\n  const [selectedBooking, setSelectedBooking] = useState(null);\n  const [assignEmployeeId, setAssignEmployeeId] = useState('');\n  const [bookingStatusUpdate, setBookingStatusUpdate] = useState('');\n  const [bookingNotes, setBookingNotes] = useState('');\n  // const [finalAmountInput, setFinalAmountInput] = useState(''); // Removed: State for final amount input\n\n  const navigate = useNavigate();\n  const componentRef = useRef(); // NEW: Ref for the component to print\n\n  const allowedStatuses = [\n    'Pending', \n    'In Progress', \n    'Completed', \n    'Cancelled',\n    'Pending - Weather', \n    'Pending - Customer Unavailable', \n    'Pending - Technical',\n    'Completed - Awaiting Admin Confirmation' // NEW: Admin can also set this status\n  ];\n\n  useEffect(() => {\n    fetchBookingsAndEmployees(); // Initial fetch\n\n    const intervalId = setInterval(fetchBookingsAndEmployees, 5000); // Poll every 5 seconds\n\n    return () => clearInterval(intervalId); // Clean up interval on component unmount\n  }, [navigate]);\n\n  const fetchBookingsAndEmployees = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const token = sessionStorage.getItem('token');\n      if (!token) {\n        navigate('/login');\n        return;\n      }\n\n      // Fetch all bookings\n      const bookingsResponse = await axios.get('http://localhost:5000/api/admin/bookings', {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setBookings(bookingsResponse.data);\n\n      // Fetch all employees\n      const employeesResponse = await axios.get('http://localhost:5000/api/admin/users', {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setEmployees(employeesResponse.data.filter(user => user.role === 'employee'));\n\n    } catch (err) {\n      console.error('Error fetching data:', err);\n      setError(err.response?.data?.message || 'Failed to load bookings or employees.');\n      if (err.response?.status === 401 || err.response?.status === 403) {\n        navigate('/login');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const openManageModal = (booking) => {\n    setSelectedBooking(booking);\n    setAssignEmployeeId(booking.employee?._id || '');\n    setBookingStatusUpdate(booking.status);\n    setBookingNotes(booking.notes || '');\n    // setFinalAmountInput(booking.finalAmount > 0 ? booking.finalAmount.toString() : ''); // Removed: Pre-fill final amount\n    setShowModal(true);\n  };\n\n  const handleAssignEmployee = async () => {\n    if (!selectedBooking || !assignEmployeeId) {\n      setError('Please select a booking and an employee to assign.');\n      setTimeout(() => setError(''), 3000);\n      return;\n    }\n\n    try {\n      const token = sessionStorage.getItem('token');\n      await axios.put(`http://localhost:5000/api/admin/bookings/${selectedBooking._id}/assign-employee`, {\n        employeeId: assignEmployeeId,\n      }, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setSuccess('Employee assigned successfully!');\n      setShowModal(false);\n      fetchBookingsAndEmployees(); // Re-fetch immediately after action\n      setTimeout(() => setSuccess(''), 3000);\n    } catch (err) {\n      console.error('Error assigning employee:', err);\n      setError(err.response?.data?.message || 'Failed to assign employee.');\n      setTimeout(() => setError(''), 3000);\n    }\n  };\n\n  const handleUpdateBookingStatus = async () => {\n    if (!selectedBooking || !bookingStatusUpdate) {\n      setError('Please select a booking and a status to update.');\n      setTimeout(() => setError(''), 3000);\n      return;\n    }\n\n    // Removed: Validation for final amount if status is 'Completed'\n    // if (bookingStatusUpdate === 'Completed') {\n    //   if (finalAmountInput === '' || isNaN(Number(finalAmountInput)) || Number(finalAmountInput) <= 0) {\n    //     setError('Final amount must be a positive number when marking as Completed.');\n    //     setTimeout(() => setError(''), 5000);\n    //     return;\n    //   }\n    // }\n\n    try {\n      const token = sessionStorage.getItem('token');\n      await axios.put(`http://localhost:5000/api/admin/bookings/${selectedBooking._id}/status`, {\n        status: bookingStatusUpdate,\n        notes: bookingNotes.trim(),\n        // finalAmount: bookingStatusUpdate === 'Completed' ? Number(finalAmountInput) : undefined, // Removed: Only send if status is 'Completed'\n      }, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setSuccess('Booking status updated successfully!');\n      setShowModal(false);\n      fetchBookingsAndEmployees(); // Re-fetch immediately after action\n      setTimeout(() => setSuccess(''), 3000);\n    } catch (err) {\n      console.error('Error updating booking status:', err);\n      setError(err.response?.data?.message || 'Failed to update booking status.');\n      setTimeout(() => setError(''), 3000);\n    }\n  };\n\n  const formatDate = (dateString) => {\n    return new Date(dateString).toLocaleString(undefined, {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center p-8\">\n        <p>Loading bookings...</p>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"text-center p-8 status-message error\">\n        <p>Error: {error}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"admin-page-container\">\n      <h3 className=\"card-title text-center\">üìÖ Manage Bookings</h3>\n\n      {success && <div className=\"status-message success\">{success}</div>}\n      {error && <div className=\"status-message error\">{error}</div>}\n\n      {/* Print Button */}\n      <div style={{ textAlign: 'right', marginBottom: '1rem' }}>\n        <ReactToPrint\n          trigger={() => <button className=\"btn btn-secondary\">üñ®Ô∏è Print Bookings</button>}\n          content={() => componentRef.current}\n          documentTitle={`Bookings List - ${new Date().toLocaleDateString()}`}\n          pageStyle=\"@page { size: A4; margin: 10mm; } @media print { body { -webkit-print-color-adjust: exact; } }\"\n        />\n      </div>\n\n      {/* Bookings Table - wrapped with ref for printing */}\n      <div ref={componentRef}>\n        <h3 style={{ textAlign: 'center', marginBottom: '1rem', display: 'none' }} className=\"print-only\">\n          Bookings List - {new Date().toLocaleDateString()}\n        </h3>\n        {bookings.length === 0 ? (\n          <p className=\"text-center text-light\">No bookings found.</p>\n        ) : (\n          <table className=\"data-table\">\n            <thead>\n              <tr>\n                <th>Booking ID</th>\n                <th>Customer</th>\n                <th>Service</th>\n                <th>Date & Time</th>\n                <th>Status</th>\n                {/* <th>Final Amount</th> */} {/* Removed Final Amount column */}\n                <th>Assigned Employee</th>\n                <th>Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {bookings.map((booking) => (\n                <tr key={booking._id}>\n                  <td>{booking._id.substring(0, 8)}</td>\n                  <td>\n                    {booking.user?.profile?.name || 'N/A'}\n                    <br />\n                    <a href={`tel:${booking.user?.phone}`} className=\"text-secondary\">\n                      {booking.user?.phone || 'N/A'}\n                    </a>\n                    <br />\n                    <small>{booking.user?.profile?.address || 'N/A'}</small>\n                  </td>\n                  <td>{booking.service?.type || 'N/A'}</td>\n                  <td>{formatDate(booking.date)} at {booking.time}</td>\n                  <td>\n                    <span className={`status-badge status-${booking.status.toLowerCase().replace(' ', '-').replace('awaiting-admin-confirmation', 'pending')}`}>\n                      {booking.status.replace(' - ', ' ').replace('awaiting admin confirmation', 'Awaiting Admin')}\n                    </span>\n                  </td>\n                  {/* <td>\n                    {booking.status === 'Completed' && booking.adminConfirmed ? (\n                      `‚Çπ${booking.finalAmount.toFixed(2)}`\n                    ) : (\n                      'N/A'\n                    )}\n                  </td> */} {/* Removed Final Amount display */}\n                  <td>{booking.employee?.profile?.name || 'Not Assigned'}</td>\n                  <td>\n                    <button\n                      onClick={() => openManageModal(booking)}\n                      className=\"btn btn-secondary btn-sm\"\n                    >\n                      Manage\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n      </div>\n\n      {/* Booking Management Modal */}\n      {showModal && selectedBooking && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <h3 className=\"modal-title\">Manage Booking: {selectedBooking._id.substring(0, 8)}</h3>\n            <div className=\"form-group\">\n              <p><strong>Customer:</strong> {selectedBooking.user?.profile?.name || 'N/A'}</p>\n              <p><strong>Phone:</strong> {selectedBooking.user?.phone || 'N/A'}</p>\n              <p><strong>Address:</strong> {selectedBooking.user?.profile?.address || 'N/A'}</p>\n              <p><strong>Service:</strong> {selectedBooking.service?.type || 'N/A'}</p>\n              <p><strong>Date & Time:</strong> {formatDate(selectedBooking.date)} at {selectedBooking.time}</p>\n              <p><strong>Current Status:</strong> {selectedBooking.status.replace(' - ', ' ').replace('awaiting admin confirmation', 'Awaiting Admin')}</p>\n              <p><strong>Assigned Employee:</strong> {selectedBooking.employee?.profile?.name || 'Not Assigned'}</p>\n              <p><strong>Notes:</strong> {selectedBooking.notes || 'N/A'}</p>\n              {/* {selectedBooking.status === 'Completed' && selectedBooking.adminConfirmed && (\n                <p><strong>Final Amount:</strong> ‚Çπ{selectedBooking.finalAmount.toFixed(2)}</p>\n              )} */} {/* Removed Final Amount display */}\n            </div>\n\n            <div className=\"form-group\">\n              <label>Assign Employee:</label>\n              <select\n                value={assignEmployeeId}\n                onChange={(e) => setAssignEmployeeId(e.target.value)}\n                className=\"form-control\"\n              >\n                <option value=\"\">Select Employee</option>\n                {employees.map(emp => (\n                  <option key={emp._id} value={emp._id}>\n                    {emp.profile?.name || emp.phone}\n                  </option>\n                ))}\n              </select>\n              <button\n                onClick={handleAssignEmployee}\n                disabled={!assignEmployeeId || assignEmployeeId === selectedBooking.employee?._id}\n                className=\"btn btn-accent btn-sm mt-2\"\n              >\n                Assign\n              </button>\n            </div>\n\n            <div className=\"form-group\">\n              <label>Update Status:</label>\n              <select\n                value={bookingStatusUpdate}\n                onChange={(e) => setBookingStatusUpdate(e.target.value)}\n                className=\"form-control\"\n              >\n                <option value=\"\">Select Status</option>\n                {allowedStatuses.map(status => (\n                  <option key={status} value={status}>{status.replace(' - ', ' ').replace('awaiting admin confirmation', 'Awaiting Admin')}</option>\n                ))}\n              </select>\n            </div>\n\n            {/* {bookingStatusUpdate === 'Completed' && (\n              <div className=\"form-group\">\n                <label>Final Amount (‚Çπ):</label>\n                <input\n                  type=\"number\"\n                  value={finalAmountInput}\n                  onChange={(e) => setFinalAmountInput(e.target.value)}\n                  className=\"form-control\"\n                  placeholder=\"Enter final amount\"\n                  min=\"0\"\n                  step=\"0.01\"\n                  required\n                />\n              </div>\n            )} */} {/* Removed Final Amount input */}\n\n            <div className=\"form-group\">\n              <label>Add Notes:</label>\n              <textarea\n                value={bookingNotes}\n                onChange={(e) => setBookingNotes(e.target.value)}\n                className=\"form-control\"\n                rows=\"3\"\n                placeholder=\"Add notes for status update (e.g., reason for cancellation, delay)\"\n              />\n            </div>\n\n            <div className=\"modal-actions\">\n              <button\n                onClick={() => setShowModal(false)}\n                className=\"btn btn-outline\"\n              >\n                Close\n              </button>\n              <button\n                onClick={handleUpdateBookingStatus}\n                disabled={\n                  !bookingStatusUpdate || \n                  (bookingStatusUpdate === selectedBooking.status && bookingNotes === (selectedBooking.notes || \"\"))\n                }\n                className=\"btn btn-primary\"\n              >\n                Update Status\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default AdminBookings;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}